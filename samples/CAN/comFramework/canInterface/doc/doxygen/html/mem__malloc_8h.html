<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>comFramework-CANInterface: mem_malloc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">comFramework-CANInterface
   &#160;<span id="projectnumber">1.5</span>
   </div>
   <div id="projectbrief">comFramework - CAN Interface - A highly flexible CAN interface for embedded platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mem__malloc_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mem_malloc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ede__basic_definitions_8h_source.html">ede_basicDefinitions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ede__event_dispatcher_engine_8config_8h_source.html">ede_eventDispatcherEngine.config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ede__external_interfaces_8h_source.html">ede_externalInterfaces.h</a>&quot;</code><br />
</div>
<p><a href="mem__malloc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9af1afd6b2143b1ef14c7c5d4fd36122"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem__malloc_8h.html#a9af1afd6b2143b1ef14c7c5d4fd36122">MEM_DIAGNOSTIC_INTERFACE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a9af1afd6b2143b1ef14c7c5d4fd36122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49f2f733b2f360379a501acca61a395"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem__malloc_8h.html#ac49f2f733b2f360379a501acca61a395">MEM_MALLOC</a>(memPoolObj, sizeOfChunk)&#160;&#160;&#160;<a class="el" href="ede__external_interfaces_8h.html#a4762ba4db214030c33fcae7e1446f7c4">EDE_CALL_INTERFACE</a>(memPoolObj, malloc, sizeOfChunk)</td></tr>
<tr class="separator:ac49f2f733b2f360379a501acca61a395"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ad17918d2e5b16f433a9e42fae305424d"><td class="memItemLeft" align="right" valign="top">typedef enum <br class="typebreak" />
<a class="el" href="mem__malloc_8h.html#ad68daff206f982d1f684bc90f6f69eda">mem_criticalSectionDir_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem__malloc_8h.html#ad17918d2e5b16f433a9e42fae305424d">mem_criticalSectionDir_t</a></td></tr>
<tr class="separator:ad17918d2e5b16f433a9e42fae305424d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e33d171a82fa164eb801861b6706167"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem__malloc_8h.html#a2e33d171a82fa164eb801861b6706167">mem_fctCriticalSection_t</a> )(<a class="el" href="mem__malloc_8h.html#ad68daff206f982d1f684bc90f6f69eda">mem_criticalSectionDir_t</a> dir)</td></tr>
<tr class="separator:a2e33d171a82fa164eb801861b6706167"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ad68daff206f982d1f684bc90f6f69eda"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem__malloc_8h.html#ad68daff206f982d1f684bc90f6f69eda">mem_criticalSectionDir_t</a> { <br />
&#160;&#160;<a class="el" href="mem__malloc_8h.html#ad68daff206f982d1f684bc90f6f69edaa7bf1f6f587e195fcd086e6daf72c41a6">mem_critSecDir_entry</a>, 
<br />
&#160;&#160;<a class="el" href="mem__malloc_8h.html#ad68daff206f982d1f684bc90f6f69edaa1497fc7e694fcb7ca899d5d060d915dc">mem_critSecDir_exit</a>
<br />
 }</td></tr>
<tr class="separator:ad68daff206f982d1f684bc90f6f69eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac1ac51c7cb5049f67cd999016d97a864"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem__malloc_8h.html#ac1ac51c7cb5049f67cd999016d97a864">mem_createMemoryPool</a> (<a class="el" href="structede__memory_pool__t.html">ede_memoryPool_t</a> *const pNewMemPool, void *pPoolMemory, unsigned int sizeOfPoolMemory, <a class="el" href="mem__malloc_8h.html#a2e33d171a82fa164eb801861b6706167">mem_fctCriticalSection_t</a> const mutualExclusionGuard)</td></tr>
<tr class="separator:ac1ac51c7cb5049f67cd999016d97a864"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Definition of global interface of module <a class="el" href="mem__malloc_8c.html">mem_malloc.c</a></p>
<p>Copyright (C) 2015-2022 Peter Vranken (<a href="#" onclick="location.href='mai'+'lto:'+'Pet'+'er'+'_Vr'+'an'+'ken'+'@Y'+'aho'+'o.'+'de'; return false;">Peter<span style="display: none;">.nosp@m.</span>_Vra<span style="display: none;">.nosp@m.</span>nken@<span style="display: none;">.nosp@m.</span>Yaho<span style="display: none;">.nosp@m.</span>o.de</a>)</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p>
<p>You should have received a copy of the GNU Lesser General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a9af1afd6b2143b1ef14c7c5d4fd36122"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEM_DIAGNOSTIC_INTERFACE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A tiny API to get some information about memory usage can be conditionally compiled. Use this API during development phase to reduce the heap space to the minimum possible. </p>

</div>
</div>
<a class="anchor" id="ac49f2f733b2f360379a501acca61a395"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEM_MALLOC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">memPoolObj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sizeOfChunk&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="ede__external_interfaces_8h.html#a4762ba4db214030c33fcae7e1446f7c4">EDE_CALL_INTERFACE</a>(memPoolObj, malloc, sizeOfChunk)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A wrapper for the call of method malloc from the memory pool interface. Using this wrapper lets the method invocation look much like a normal function call. In particular, the explicit use of the instance handle is hidden. </p><dl class="section return"><dt>Returns</dt><dd>Get the void * to the allocated memory. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">memPoolObj</td><td>The memory pool to use. A memory pool interface instance, which has been created and returned by <a class="el" href="mem__malloc_8h.html#ac1ac51c7cb5049f67cd999016d97a864">mem_createMemoryPool()</a>. </td></tr>
    <tr><td class="paramname">sizeOfChunk</td><td>The number of bytes to be allocated in the memory pool. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ad17918d2e5b16f433a9e42fae305424d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="mem__malloc_8h.html#ad68daff206f982d1f684bc90f6f69eda">mem_criticalSectionDir_t</a>  <a class="el" href="mem__malloc_8h.html#ad68daff206f982d1f684bc90f6f69eda">mem_criticalSectionDir_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The argument type of any implementation of a mutual exclusion function: Do we enter or leave the critical section? </p>

</div>
</div>
<a class="anchor" id="a2e33d171a82fa164eb801861b6706167"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* mem_fctCriticalSection_t)(<a class="el" href="mem__malloc_8h.html#ad68daff206f982d1f684bc90f6f69eda">mem_criticalSectionDir_t</a> dir)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If memory allocation is done from competing contexts but from one and the same pool then some mutual exclusion is required to safely do the operation. This requires some external code, an implementation that is unknow to the memory pool implementation. Here is the interface definition. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ad68daff206f982d1f684bc90f6f69eda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mem__malloc_8h.html#ad68daff206f982d1f684bc90f6f69eda">mem_criticalSectionDir_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The argument type of any implementation of a mutual exclusion function: Do we enter or leave the critical section? </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ad68daff206f982d1f684bc90f6f69edaa7bf1f6f587e195fcd086e6daf72c41a6"></a>mem_critSecDir_entry&#160;</td><td class="fielddoc">
<p>Enter critical section. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ad68daff206f982d1f684bc90f6f69edaa1497fc7e694fcb7ca899d5d060d915dc"></a>mem_critSecDir_exit&#160;</td><td class="fielddoc">
<p>Leave critical section. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac1ac51c7cb5049f67cd999016d97a864"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mem_createMemoryPool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structede__memory_pool__t.html">ede_memoryPool_t</a> *const&#160;</td>
          <td class="paramname"><em>pNewMemPool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pPoolMemory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>sizeOfPoolMemory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem__malloc_8h.html#a2e33d171a82fa164eb801861b6706167">mem_fctCriticalSection_t</a> const&#160;</td>
          <td class="paramname"><em>mutualExclusionGuard</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new memory pool from some given memory.</p>
<p>Create a new memory pool from some given memory. </p><dl class="section return"><dt>Returns</dt><dd>Get <em>true</em> if operation succeeded. If the function returns <em>false</em> then * <em>pNewMemPool</em> will be unusable.<br />
 A memory pool requires a minimum number of Bytes to host the administrative data. In pathologic situations, where <em>sizeOfPoolMemory</em> promises only a few Byte, the function may fail.<br />
 The function will fail only in case of lack of memory. Since all memory allocation is static and deterministic an appropriate and recommended failure handling concept is to check the return value by assertion only. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pNewMemPool</td><td>The newly created object by reference. The caller has to provide the space for the new object. </td></tr>
    <tr><td class="paramname">pPoolMemory</td><td>The pointer to a chunk of memory, which is statically allocated, available and reserved for the given memory pool during the entire application run-time. This chunk of memory will be partitioned and made available to those data structures of the CAN interface, which are associated with the given pool. The properties of this memory area will become the properties of all the chunks of memory dealt out later by the new pool. </td></tr>
    <tr><td class="paramname">sizeOfPoolMemory</td><td>The number of bytes of <em>pPoolMemory</em>. </td></tr>
    <tr><td class="paramname">mutualExclusionGuard</td><td>If the same memory is partitioned and distributed to clients running in different task (or interrupt) contexts then the entry into method mem_malloc() needs to be serialized.<br />
 If <em>mutualExclusionGuard</em> is not <em>NULL</em> then it is invoked before and after the actual operation of memory allocation to ensure atomicity of the operation (and if requested, see mem_malloc()). The specified guard function needs to be suitable to mutually exclude all contexts competing for the given memory pool.<br />
 One should pass <em>NULL</em> in a single threaded environment or if the newly created memory pool object won't ever be used in concurrent contexts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>The function writes (only) to the specified new pool memory. Therefore, it needs to be called from the context, which owns the new pool or from a super-ordinated context, which has write access to the pool-memory, too, e.g. the operating system. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_050edd66366d13764f98250ef6db77f6.html">code</a></li><li class="navelem"><a class="el" href="dir_8ae31aac3bacc0ded92e05f421c5e1c0.html">memoryPool</a></li><li class="navelem"><a class="el" href="mem__malloc_8h.html">mem_malloc.h</a></li>
    <li class="footer">Generated on Fri Feb 18 2022 19:44:45 for comFramework-CANInterface by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
