<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>comFramework-CANInterface: mem_malloc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">comFramework-CANInterface
   &#160;<span id="projectnumber">1.5</span>
   </div>
   <div id="projectbrief">comFramework - CAN Interface - A highly flexible CAN interface for embedded platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mem__malloc_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mem_malloc.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="mem__malloc_8h_source.html">mem_malloc.h</a>&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;<a class="el" href="ede__basic_definitions_8h_source.html">ede_basicDefinitions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ede__event_dispatcher_engine_8config_8h_source.html">ede_eventDispatcherEngine.config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ede__external_interfaces_8h_source.html">ede_externalInterfaces.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a13b383870e7db7a8897784674162df1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem__malloc_8c.html#a13b383870e7db7a8897784674162df1b">ALIGN_PTR</a>(p)</td></tr>
<tr class="separator:a13b383870e7db7a8897784674162df1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a131752e28046ff847970f3461f9bfad9"><td class="memItemLeft" align="right" valign="top">typedef struct mem_memoryPool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem__malloc_8c.html#a131752e28046ff847970f3461f9bfad9">mem_memoryPool_t</a></td></tr>
<tr class="separator:a131752e28046ff847970f3461f9bfad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac1ac51c7cb5049f67cd999016d97a864"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mem__malloc_8c.html#ac1ac51c7cb5049f67cd999016d97a864">mem_createMemoryPool</a> (<a class="el" href="structede__memory_pool__t.html">ede_memoryPool_t</a> *const pNewMemPool, void *pPoolMemory, unsigned int sizeOfPoolMemory, <a class="el" href="mem__malloc_8h.html#a2e33d171a82fa164eb801861b6706167">mem_fctCriticalSection_t</a> const mutualExclusionGuard)</td></tr>
<tr class="separator:ac1ac51c7cb5049f67cd999016d97a864"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The memory allocation unit, which is the basis of the concept of static, deterministic memory allocation: A given chunk of memory of limited, known size is partitioned and distributed on demand. The idea is most simple. Each caller gets the demanded piece of memory until the initial chunk of memory is exhausted. There's no method to free allocated memory again and therefore all typical heap problems with fragmentation and undeterministic timing are strictly avoided. A deterministic run-time behavior of the client code is ensured. The application, which uses this allocation needs of course be aware of the concept. It must e.g. not permit to destroy objects or to re-initialize some data structures. Instead it needs to implement concepts like one-time initialization and object pools for reuse.</p>
<p>Copyright (C) 2015-2022 Peter Vranken (<a href="#" onclick="location.href='mai'+'lto:'+'Pet'+'er'+'_Vr'+'an'+'ken'+'@Y'+'aho'+'o.'+'de'; return false;">Peter<span style="display: none;">.nosp@m.</span>_Vra<span style="display: none;">.nosp@m.</span>nken@<span style="display: none;">.nosp@m.</span>Yaho<span style="display: none;">.nosp@m.</span>o.de</a>)</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p>
<p>You should have received a copy of the GNU Lesser General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a13b383870e7db7a8897784674162df1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ALIGN_PTR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(<span class="keywordtype">char</span>*)((uintptr_t)((<span class="keywordtype">char</span>*)(p)+(<a class="code" href="ede__event_dispatcher_engine_8config_8h.html#a550231c7d9af9163faba9a68d9e1df75">EDE_COMMON_MACHINE_ALIGNMENT</a>)-1u)   \</div>
<div class="line">                                &amp; ~((<a class="code" href="ede__event_dispatcher_engine_8config_8h.html#a550231c7d9af9163faba9a68d9e1df75">EDE_COMMON_MACHINE_ALIGNMENT</a>)-1u)                      \</div>
<div class="line">                               )</div>
<div class="ttc" id="ede__event_dispatcher_engine_8config_8h_html_a550231c7d9af9163faba9a68d9e1df75"><div class="ttname"><a href="ede__event_dispatcher_engine_8config_8h.html#a550231c7d9af9163faba9a68d9e1df75">EDE_COMMON_MACHINE_ALIGNMENT</a></div><div class="ttdeci">#define EDE_COMMON_MACHINE_ALIGNMENT</div><div class="ttdef"><b>Definition:</b> ede_eventDispatcherEngine.config.h:102</div></div>
</div><!-- fragment --><p>Move a pointer upwards until it points to an address, which has the common machine alignment. </p><dl class="section return"><dt>Returns</dt><dd>The modified pointer is returned as char pointer. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>The pointer to become aligned. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a131752e28046ff847970f3461f9bfad9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct mem_memoryPool_t  mem_memoryPool_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A memory pool consists of a few pointers and counts, which describe the memory partitioning of the pool. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac1ac51c7cb5049f67cd999016d97a864"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mem_createMemoryPool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structede__memory_pool__t.html">ede_memoryPool_t</a> *const&#160;</td>
          <td class="paramname"><em>pNewMemPool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pPoolMemory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>sizeOfPoolMemory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem__malloc_8h.html#a2e33d171a82fa164eb801861b6706167">mem_fctCriticalSection_t</a> const&#160;</td>
          <td class="paramname"><em>mutualExclusionGuard</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new memory pool from some given memory. </p><dl class="section return"><dt>Returns</dt><dd>Get <em>true</em> if operation succeeded. If the function returns <em>false</em> then * <em>pNewMemPool</em> will be unusable.<br />
 A memory pool requires a minimum number of Bytes to host the administrative data. In pathologic situations, where <em>sizeOfPoolMemory</em> promises only a few Byte, the function may fail.<br />
 The function will fail only in case of lack of memory. Since all memory allocation is static and deterministic an appropriate and recommended failure handling concept is to check the return value by assertion only. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pNewMemPool</td><td>The newly created object by reference. The caller has to provide the space for the new object. </td></tr>
    <tr><td class="paramname">pPoolMemory</td><td>The pointer to a chunk of memory, which is statically allocated, available and reserved for the given memory pool during the entire application run-time. This chunk of memory will be partitioned and made available to those data structures of the CAN interface, which are associated with the given pool. The properties of this memory area will become the properties of all the chunks of memory dealt out later by the new pool. </td></tr>
    <tr><td class="paramname">sizeOfPoolMemory</td><td>The number of bytes of <em>pPoolMemory</em>. </td></tr>
    <tr><td class="paramname">mutualExclusionGuard</td><td>If the same memory is partitioned and distributed to clients running in different task (or interrupt) contexts then the entry into method mem_malloc() needs to be serialized.<br />
 If <em>mutualExclusionGuard</em> is not <em>NULL</em> then it is invoked before and after the actual operation of memory allocation to ensure atomicity of the operation (and if requested, see mem_malloc()). The specified guard function needs to be suitable to mutually exclude all contexts competing for the given memory pool.<br />
 One should pass <em>NULL</em> in a single threaded environment or if the newly created memory pool object won't ever be used in concurrent contexts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>The function writes (only) to the specified new pool memory. Therefore, it needs to be called from the context, which owns the new pool or from a super-ordinated context, which has write access to the pool-memory, too, e.g. the operating system. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_050edd66366d13764f98250ef6db77f6.html">code</a></li><li class="navelem"><a class="el" href="dir_8ae31aac3bacc0ded92e05f421c5e1c0.html">memoryPool</a></li><li class="navelem"><a class="el" href="mem__malloc_8c.html">mem_malloc.c</a></li>
    <li class="footer">Generated on Fri Feb 18 2022 19:44:45 for comFramework-CANInterface by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
