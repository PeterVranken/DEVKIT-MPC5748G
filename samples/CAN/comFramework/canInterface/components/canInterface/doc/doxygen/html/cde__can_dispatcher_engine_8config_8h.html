<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>comFramework-CANInterface: cde_canDispatcherEngine.config.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">comFramework-CANInterface
   &#160;<span id="projectnumber">1.4</span>
   </div>
   <div id="projectbrief">comFramework - CAN Interface - A highly flexible CAN interface for embedded platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cde__can_dispatcher_engine_8config_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">cde_canDispatcherEngine.config.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;os_types.h&quot;</code><br />
</div>
<p><a href="cde__can_dispatcher_engine_8config_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0ee7efaec4622ead6b1dd85fbdf67038"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#a0ee7efaec4622ead6b1dd85fbdf67038">CDE_ASSERT</a>(booleanInvariant)&#160;&#160;&#160;assert(booleanInvariant)</td></tr>
<tr class="separator:a0ee7efaec4622ead6b1dd85fbdf67038"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a714f50e21da333191f9038978888ce31"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#a714f50e21da333191f9038978888ce31">CDE_COMMON_MACHINE_ALIGNMENT</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a714f50e21da333191f9038978888ce31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd9a70d559522dfac1af90b99d1fdb1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#abd9a70d559522dfac1af90b99d1fdb1e">cde_enterCriticalSection</a>()</td></tr>
<tr class="separator:abd9a70d559522dfac1af90b99d1fdb1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2896ec09d34c4c244f9289952802c58c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#a2896ec09d34c4c244f9289952802c58c">cde_leaveCriticalSection</a>()</td></tr>
<tr class="separator:a2896ec09d34c4c244f9289952802c58c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb0f6bcc1f14bd1e8591a25e2fd98de0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#adb0f6bcc1f14bd1e8591a25e2fd98de0">CDE_ENABLE_API_GET_INDEX_BUS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:adb0f6bcc1f14bd1e8591a25e2fd98de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedf5b13fd123f6992349ee7f21e732a8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#aedf5b13fd123f6992349ee7f21e732a8">CDE_ENABLE_API_GET_OS_HANDLE_FRAME</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aedf5b13fd123f6992349ee7f21e732a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86269295eb995fa5f749a79ff708ae2d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#a86269295eb995fa5f749a79ff708ae2d">CDE_ENABLE_API_IS_INBOUND_TRANSMISSION</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a86269295eb995fa5f749a79ff708ae2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f045f94b51a771db09e791e2e55f11c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#a6f045f94b51a771db09e791e2e55f11c">CDE_ENABLE_TIMER_CONTEXT_DATA</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a6f045f94b51a771db09e791e2e55f11c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa315212b79df638706d6b0160bfae343"><td class="memItemLeft" align="right" valign="top">typedef unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#aa315212b79df638706d6b0160bfae343">cde_osHandleFrame_t</a></td></tr>
<tr class="separator:aa315212b79df638706d6b0160bfae343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a7063040bcdd2c681b211bfe747dbd"><td class="memItemLeft" align="right" valign="top">typedef unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html#a44a7063040bcdd2c681b211bfe747dbd">cde_atomicUnsignedInt_t</a></td></tr>
<tr class="separator:a44a7063040bcdd2c681b211bfe747dbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The integration environment dependent, static configuration of the CAN interface.</p>
<p>Copyright (C) 2015-2017 Peter Vranken (<a href="#" onclick="location.href='mai'+'lto:'+'Pet'+'er'+'_Vr'+'an'+'ken'+'@Y'+'aho'+'o.'+'de'; return false;">Peter<span style="display: none;">.nosp@m.</span>_Vra<span style="display: none;">.nosp@m.</span>nken@<span style="display: none;">.nosp@m.</span>Yaho<span style="display: none;">.nosp@m.</span>o.de</a>)</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p>
<p>You should have received a copy of the GNU Lesser General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a0ee7efaec4622ead6b1dd85fbdf67038"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDE_ASSERT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">booleanInvariant</td><td>)</td>
          <td>&#160;&#160;&#160;assert(booleanInvariant)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configuration<br />
 The defines and typedefs found in this section are the configuration of the CAN interface for the integration into a specific platform. The list of required include files as far as they are configuration: In most embedded platforms the basic types are addressed to under names like uint8, sint16, int16_t, etc. The implementation of the CAN interface tries to avoid these types in order to benefit from the C type concept, which leaves it open to the platform which widths are suitable for the basic types. Particularly on small 8 or 16 systems this will save a significant amount of expensive RAM.<br />
 However, at the interface to the platform environment the use of such types is likely. If a type definition is needed then you would place an according include statement here.<br />
 Moreover, down here there are references to the types of some operating system elements like bus and frame handles. To resolve these refernces it's likely that you need to include some related headers. The include statements should be placed here.Many error conditions, which are static in the sense that they can only appear due to real errors in the implementation code (as opposed to errors caused by run-time data) are checked by assertions. This relates to the implementation of the engine itself, but</p><ul>
<li>much more important - to the implementation of the integration code, mainly the event callbacks, too. Here, the most typical errors will be caught the first time the code is executed. This concept of static error checks makes it inevitable to have an assertion mechanism. Most platforms will offer an assertion. <a class="el" href="cde__can_dispatcher_engine_8config_8h.html#a0ee7efaec4622ead6b1dd85fbdf67038">CDE_ASSERT(boolean_t)</a> needs to expand to the assertion on your platform. </li>
</ul>

</div>
</div>
<a class="anchor" id="a714f50e21da333191f9038978888ce31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDE_COMMON_MACHINE_ALIGNMENT&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The memory allocation mechanism depends on the alignment of machine words. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Specify the alignment, which suits to all basic machine words, e.g. 4 for most 32 Bit architectures. The define needs to expand to a integer literal, which designates a power of two, mostly one out of 1, 2 or 4. </dd></dl>

</div>
</div>
<a class="anchor" id="abd9a70d559522dfac1af90b99d1fdb1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cde_enterCriticalSection</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The thread-safe implementation of the dispatcher queue builds on defined memory ordering; machine operations are expected to happen in the order of C code statements. This is not easy to achieve in C as the language semantics doesn't have awareness of concurrency (before C11). The solution will always be target and compiler dependent. Here, we offer a macro, which is meant to implement a full memory barrier on the target.<br />
 Fortunately, when using GCC there is a platform independent solution. See <a href="http://gcc.gnu.org/onlinedocs/gcc-4.4.3/gcc/Atomic-Builtins.html">http://gcc.gnu.org/onlinedocs/gcc-4.4.3/gcc/Atomic-Builtins.html</a> for details. Some few pieces of code require mutual exclusion of the APSW tasks and the interrupts, which are involved in the CAN handling. Which mechanisms to apply is fully platform dependent. There might be a mutex mechanism, a <em>Get/ReleaseResource</em> function pair, a function pair like Suspend/ReleaseAllInterrupts or what else. Configure the next define such that mutual exclusion is turned on.<br />
 It is not necessary, that the implementation supportes nested pairs of enter/leave critical section.<br />
 The implementation requires mutual exclusion only for heap operations; all dispatchers (which are typically running in different task contexts) share the same heap. Fortunately, with one exception all heap operations are done during the system initialization, i.e. in a still race condition free, single-threaded environment and no mutual exclusion is required here.<br />
 The exception is using the timer creation API at run-time of the dispatcher engine. However, to optimally benefit from the concept of static, deterministic memory allocation it's anyway recommended not to use the timer creation API outside the interface initialization.<br />
 Therefore, if the recommendation of not using the timer creation API at run-time is obeyed then the critical section macro should expand to nothing as it is by default. </p>

</div>
</div>
<a class="anchor" id="a2896ec09d34c4c244f9289952802c58c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cde_leaveCriticalSection</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Some few pieces of code require mutual exclusion of the APSW tasks and the interrupts, which are involved in the CAN handling. Which mechanisms to apply is fully platform dependent. There might be a mutex mechanism, a <em>Get/ReleaseResource</em> function pair, a function pair like Suspend/ReleaseAllInterrupts or what else. Configure the next define such that mutual exclusion is turned off.<br />
 If the timer creation API is not used after the interface initialization then this macro should expand to nothing as it is by default. See <a class="el" href="cde__can_dispatcher_engine_8config_8h.html#abd9a70d559522dfac1af90b99d1fdb1e">cde_enterCriticalSection</a> for a more in depths consideration. </p>

</div>
</div>
<a class="anchor" id="adb0f6bcc1f14bd1e8591a25e2fd98de0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDE_ENABLE_API_GET_INDEX_BUS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tailoring of the API: The query function for the index of the bus (the index serves as the handle of buses), is not always required and can be switched off at compile time. This will safe <em>sizeof(unsigned int)</em> Byte per registered frame.<br />
 The define is set to either 1 or 0. </p>

</div>
</div>
<a class="anchor" id="aedf5b13fd123f6992349ee7f21e732a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDE_ENABLE_API_GET_OS_HANDLE_FRAME&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tailoring of the API: The query function for the OS frame handle, <a class="el" href="cde__can_dispatcher_engine_8c.html#a977d3cf3bbcc5558786732b15aec9a71">cde_getOsHandleFrame()</a>, is not always required and can be switched off at compile time. This will safe <em>sizeof(cde_osHandleFrame_t)</em> Byte per registered frame.<br />
 The define is set to either 1 or 0. </p>

</div>
</div>
<a class="anchor" id="a86269295eb995fa5f749a79ff708ae2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDE_ENABLE_API_IS_INBOUND_TRANSMISSION&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tailoring of the API: The query function for the transmission direction, <em>cde_isInboundTransmission</em>, is not always required and can be switched off at compile time. This will safe <em>sizeof(boolean_t)</em> Byte per registered frame.<br />
 The define is set to either 1 or 0. </p>

</div>
</div>
<a class="anchor" id="a6f045f94b51a771db09e791e2e55f11c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDE_ENABLE_TIMER_CONTEXT_DATA&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tailoring of the API: The timer context data is not always required and can be switched off at compile time. This will safe <em>sizeof(void*)</em> Byte per created timer. An alternative to applying user provided data can be quering the timer handle to identify it, please refer to <a class="el" href="cde__can_dispatcher_engine_8c.html#aac2292cf5c806c325a65062cf6f344f4">cde_getHandleTimer()</a>.<br />
 The define is set to either 1 or 0. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="aa315212b79df638706d6b0160bfae343"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned int <a class="el" href="cde__can_dispatcher_engine_8config_8h.html#aa315212b79df638706d6b0160bfae343">cde_osHandleFrame_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The type of a frame handle. The handle is needed to distinguish all frames in the context of an engine. If the engine dispatches the frames of a single bus then it can be identical to the CAN ID but it can also be a linear index across all received frames or whatever. The choice of the handle should be made such that the use of a hash table can be avoided at runtime. It is assumed, that the CAN API of the underlying system uses some kind of handle for frames and this handle is simply passed through by the dispatcher engine.<br />
</p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Use the typedef to make our internally used <em>cde_osHandleFrame_t</em> identical to the operating system's given CAN frame handle or identifier type. </dd></dl>

</div>
</div>
<a class="anchor" id="a44a7063040bcdd2c681b211bfe747dbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned int <a class="el" href="cde__can_dispatcher_engine_8config_8h.html#a44a7063040bcdd2c681b211bfe747dbd">cde_atomicUnsignedInt_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The thread-safe implementation of the dispatcher queue builds on atomic read and write on a numeric type. Basically any atomic unsigned integer available on the target platform can be typedef'ed here; however, the maximum length of the queue is given by the range of this type - thus don't use a too short integer type if you have the choice. unsigned int will be approriate on most 32 and 16 Bit platforms and unsigned char on a typical 8 Bit platform. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="cde__can_dispatcher_engine_8config_8h.html">cde_canDispatcherEngine.config.h</a></li>
    <li class="footer">Generated on Wed Sep 12 2018 23:00:09 for comFramework-CANInterface by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
