<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>comFramework - CAN Interface: m16_mapDirectLookupU16.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">comFramework - CAN Interface<span id="projectnumber">&#160;2.0</span>
   </div>
   <div id="projectbrief">comFramework - CAN Interface - A highly flexible CAN interface for embedded platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('m16__map_direct_lookup_u16_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">m16_mapDirectLookupU16.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="m16__map_direct_lookup_u16_8h_source.html">m16_mapDirectLookupU16.h</a>&quot;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;<a class="el" href="ede__basic_definitions_8h_source.html">ede_basicDefinitions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ede__external_interfaces_8h_source.html">ede_externalInterfaces.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mem__malloc_8h_source.html">mem_malloc.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae50e7935cd2e505123708e5039c60e5b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="m16__map_direct_lookup_u16_8c.html#ae50e7935cd2e505123708e5039c60e5b">MAX_BYTE_PER_TABLE_INSTANCE</a>&#160;&#160;&#160;0x10000u</td></tr>
<tr class="separator:ae50e7935cd2e505123708e5039c60e5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4887caff754ae7a221354e5969024f88"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="m16__map_direct_lookup_u16_8c.html#a4887caff754ae7a221354e5969024f88">MAX_BYTE_TABLE_AREA</a>&#160;&#160;&#160;UINT16_MAX</td></tr>
<tr class="separator:a4887caff754ae7a221354e5969024f88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf275a6ab4454ca5c2ab4ebf90d86c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="m16__map_direct_lookup_u16_8c.html#adbf275a6ab4454ca5c2ab4ebf90d86c4">INVALID_MAP_VALUE</a>&#160;&#160;&#160;UINT_MAX</td></tr>
<tr class="separator:adbf275a6ab4454ca5c2ab4ebf90d86c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a1249ad2cb2783e8006ebc48cfd744293"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="m16__map_direct_lookup_u16_8c.html#a1249ad2cb2783e8006ebc48cfd744293">uintMapVal_t</a></td></tr>
<tr class="separator:a1249ad2cb2783e8006ebc48cfd744293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bd938f37d61484cf93470b1d6ed68ce"><td class="memItemLeft" align="right" valign="top">typedef struct mapInstance_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="m16__map_direct_lookup_u16_8c.html#a4bd938f37d61484cf93470b1d6ed68ce">mapInstance_t</a></td></tr>
<tr class="separator:a4bd938f37d61484cf93470b1d6ed68ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a337126cbc414f9ae3202ce7c8779159b"><td class="memItemLeft" align="right" valign="top">typedef struct map_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="m16__map_direct_lookup_u16_8c.html#a337126cbc414f9ae3202ce7c8779159b">map_t</a></td></tr>
<tr class="separator:a337126cbc414f9ae3202ce7c8779159b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abc415f90661587ce4e1fa93119a17c32"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="m16__map_direct_lookup_u16_8c.html#abc415f90661587ce4e1fa93119a17c32">m16_createMapDirectLookupU16</a> (<a class="el" href="structede__map_sender_ev_handle_to_idx__t.html">ede_mapSenderEvHandleToIdx_t</a> *const pNewMap, unsigned int noKindsOfEv, const signed int rangeSenderHandleEvAry[][2u], <a class="el" href="structede__memory_pool__t.html">ede_memoryPool_t</a> *const pMemPool)</td></tr>
<tr class="separator:abc415f90661587ce4e1fa93119a17c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This module provides a simple handle map, suitable for many applications of the event dispatcher mechanism. It can be used as mapping from some OS event handles (e.g. Rx CAN frame handles) to the zero based index space of a dispatcher object.<br  />
 The implementation supports the interfaces defined by the event sender and dispatcher engine and the map is therefore most easy to use in this context. Just create a map object and pass it to the constructor of sender or dispatcher object.<br  />
 The implementation of this map uses a direct lookup table, i.e. the map is highly execution time efficient, O(1), and can be applied for arbitrary mappings as long as the convered OS handle and index spaces suffice. These spaces are limited, they spawn an 16 Bit range, in order to not waste too much expensive RAM.<br  />
 Most use cases will have a few kinds of events, which know an event handle for further distinction of events of the kind. (CAN: Message Rx and Tx events.) Many other events won't use a handle but stand for themselves. (CAN: Bus-off, bus on) To support these without wasting useless lookup RAM, the implementation offers an alternative, "simple" mapping: A single map value is stored for each of these kinds of events.</p>
<p >Copyright (C) 2022 Peter Vranken (<a href="#" onclick="location.href='mai'+'lto:'+'Pet'+'er'+'_Vr'+'an'+'ken'+'@Y'+'aho'+'o.'+'de'; return false;">Peter<span class="obfuscator">.nosp@m.</span>_Vra<span class="obfuscator">.nosp@m.</span>nken@<span class="obfuscator">.nosp@m.</span>Yaho<span class="obfuscator">.nosp@m.</span>o.de</a>)</p>
<p >This program is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or any later version.</p>
<p >This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p>
<p >You should have received a copy of the GNU Lesser General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae50e7935cd2e505123708e5039c60e5b" name="ae50e7935cd2e505123708e5039c60e5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae50e7935cd2e505123708e5039c60e5b">&#9670;&nbsp;</a></span>MAX_BYTE_PER_TABLE_INSTANCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BYTE_PER_TABLE_INSTANCE&#160;&#160;&#160;0x10000u</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The maximum size of the lookup table area of a single map instance. This value is used only to recognize errors in the calling code, e.g. overflows due to confused from and to values. The actual value of the define is rather irrelevant; the expectation is that all ever used maps will be much smaller than the defined size. If a map of an accordingly wide spread handle space would really be needed then the implementation as direct table lookup should be doubted. </p>

</div>
</div>
<a id="a4887caff754ae7a221354e5969024f88" name="a4887caff754ae7a221354e5969024f88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4887caff754ae7a221354e5969024f88">&#9670;&nbsp;</a></span>MAX_BYTE_TABLE_AREA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BYTE_TABLE_AREA&#160;&#160;&#160;UINT16_MAX</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The maximum total size of the entire lookup area. We use a 16 Bit value to index this range and we need to store the first unused index in the 16 Bit variable. Therefore, the maximum size specified here need to be less than 2^16. </p>

</div>
</div>
<a id="adbf275a6ab4454ca5c2ab4ebf90d86c4" name="adbf275a6ab4454ca5c2ab4ebf90d86c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbf275a6ab4454ca5c2ab4ebf90d86c4">&#9670;&nbsp;</a></span>INVALID_MAP_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVALID_MAP_VALUE&#160;&#160;&#160;UINT_MAX</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Empty map entry. Used for recognition of ambiguous mappings. Note, this fault recognition effectively reduces the range of supported dispatcher event source indexes by one. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a1249ad2cb2783e8006ebc48cfd744293" name="a1249ad2cb2783e8006ebc48cfd744293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1249ad2cb2783e8006ebc48cfd744293">&#9670;&nbsp;</a></span>uintMapVal_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="m16__map_direct_lookup_u16_8c.html#a1249ad2cb2783e8006ebc48cfd744293">uintMapVal_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The map value type. </p>

</div>
</div>
<a id="a4bd938f37d61484cf93470b1d6ed68ce" name="a4bd938f37d61484cf93470b1d6ed68ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bd938f37d61484cf93470b1d6ed68ce">&#9670;&nbsp;</a></span>mapInstance_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct mapInstance_t mapInstance_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >One instance of the map, i.e., the structure needed for one kind of event. </p>

</div>
</div>
<a id="a337126cbc414f9ae3202ce7c8779159b" name="a337126cbc414f9ae3202ce7c8779159b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a337126cbc414f9ae3202ce7c8779159b">&#9670;&nbsp;</a></span>map_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct map_t map_t</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abc415f90661587ce4e1fa93119a17c32" name="abc415f90661587ce4e1fa93119a17c32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc415f90661587ce4e1fa93119a17c32">&#9670;&nbsp;</a></span>m16_createMapDirectLookupU16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool m16_createMapDirectLookupU16 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structede__map_sender_ev_handle_to_idx__t.html">ede_mapSenderEvHandleToIdx_t</a> *const&#160;</td>
          <td class="paramname"><em>pNewMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>noKindsOfEv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const signed int&#160;</td>
          <td class="paramname"><em>rangeSenderHandleEvAry</em>[][2u], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structede__memory_pool__t.html">ede_memoryPool_t</a> *const&#160;</td>
          <td class="paramname"><em>pMemPool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create new map object. It has <em>noKindsOfEv</em> independently operating instances, which relate to the same number of supported kinds of events. </p><dl class="section return"><dt>Returns</dt><dd>The function returns <em>true</em> in case of success, <em>false</em> otherwise. The map is not usable in the latter case. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pNewMap</td><td>If the function returns <em>true</em>, then the new map object is returned by reference as * <em>pNewMap</em>. </td></tr>
    <tr><td class="paramname">noKindsOfEv</td><td>The map will have this number of independent lookup tables.<br  />
 Caution, later at runtime, the argument kindOfEvent will be used as zero based index into the array of lookup tables. Consequently, this map implementation must not be used, if the applied enumeration of event kinds is not zero based! </td></tr>
    <tr><td class="paramname">rangeSenderHandleEvAry</td><td>An array of ranges of sender handle values. Each range relates to one kind of event, so the array size is <em>noKindsOfEv</em> entries. Each entry, a handle value range, consists of two intergers. The first one is the lowest possible sender handle value and the seconds one is the largest possible sender handle value plus one.<br  />
 A range of zero length is allowed. If rangeSenderHandleEvAry[][0] == rangeSenderHandleEvAry[][1], then no lookup table is stored for the given kind of event. Instead, that kind of event will be mapped onto a fixed value, regardless of a sender event handle. (It is assumed a standard use case, that kinds of event stands for themselves but don't require an additional handle space.) </td></tr>
    <tr><td class="paramname">pMemPool</td><td>This memory pool (by reference) provides the memory for the new object. The map is used from the dispatcher engine, so this memory pool should have the same access rights or restrictions as the one applied for creation of the related dispatcher object. Usually, it'll even be the same one. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_050edd66366d13764f98250ef6db77f6.html">code</a></li><li class="navelem"><a class="el" href="dir_b30582f9ff20b54dfb5d39c40ac29991.html">handleMaps</a></li><li class="navelem"><a class="el" href="m16__map_direct_lookup_u16_8c.html">m16_mapDirectLookupU16.c</a></li>
    <li class="footer">Generated on Tue Oct 4 2022 15:29:09 for comFramework - CAN Interface by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
